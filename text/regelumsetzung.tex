\section{Regelumsetzung allgemein}
Regeln sind hier sogenannte Inferenzprozeduren, das sind automatisierte Verfahren zur Berechnung logischer Folgerungen. Inferenzenprozeduren sind bereits aus der Aussagenlogik bekannt.

\begin{table}[htb]
\begin{center}
	\begin{tabular}{l}
	A$\rightarrow$B \\
	A \\
	\hline
	B
	\end{tabular}
\end{center}
	\caption{Modus ponens}
	\label{table-modus-ponens}
\end{table}

\begin{table}[htb]
\begin{center}
	\begin{tabular}{l}
	A$\rightarrow$B \\
	$\neg$B \\
	\hline
	$\neg$A
	\end{tabular}
\end{center}
	\caption{Modus tollens}
	\label{table-modus-tollens}
\end{table}

Diese beiden Ableitungsregeln erlauben es, die beiden Aussagen in der Prämisse durch die Schlussfolgerung zu ersetzen. Für einen Schlussfolgerer mit direct-materialization werden, die Prämissen nicht ersetzt sondern weiterhin erhalten. Es könnte ja möglich sein das weitere Ableitungsschritte damit möglich sind oder das spätere Anfragen auf diese Aussagen abzielen. Mit einer Ableitungsregel kann also die Aussagenbasis vergrößert werden.

Es sind dabei jedoch nicht alle Ableitungsregeln gültig.
\begin{table}
\begin{center}
	\begin{tabular}{l}
	A$\rightarrow$B \\
	B \\
	\hline
	A
	\end{tabular}
\end{center}
	\caption{ungültige Ableitung}
	\label{table-invalid-inferred}
\end{table}
ist z.B. kein gültiger Schluss.

Eine Menge von vernünftigen Ableitungsregeln zu finden ist keine leichte Aufgabe. Dabei eine möglichst große Ausdrucksmächtigkeit zu erhalten, ohne die Komplexität der Regeln aus den Augen zu verlieren wurde versucht mit dem OWL2 RL Fragement zu erreichen.


\section{Regelumsetzung von OWL2 RL}

In der Profil-Spezifikation von OWL2 RL \cite{OWL2Profiles} wird eine Reihe von Regeln angegeben, die es ermöglichen entsprechend der Sprachmächtigkeit darin zu schlussfolgern.

Die angegebenen Regeln sind vollständig aber nicht optimal - wie aus der Profilspezifikation zu entnehmen ist -, d.h. mit diesem Satz an Regeln kann auf alles geschloßen werden, auf was im RL Profil geschloßen werden kann. Allerdings muss dieser Satz an Regeln nicht der einzige oder minimale Satz sein, der zu diesem Ergebnis kommt.

In dieser Diplomarbeit wird versucht möglichst nah an dieser Regelmenge zu bleiben, um sicherzustellen, das die Semantik korrekt erhalten ist und somit die Implementierung leichter zu überprüfen ist.
Abweichungen von den vorgegebenen Regeln findet nur in besonderen Ausnahmen statt und werden später \ref{abschnitt-regelbeispiele} auch einzeln begründet. Eine allgemeine Begründung für die Existenz der Ausnahmen liegt darin, dass die Regeln in SQL übersetzt werden - was schon von alleine eine andere Schreib- und Sichtweise  mitbringt - und zum anderen sind gewisse Optimierungen erwünscht.
Wieso und wie das funktioniert wird ebenfalls in diesem Abschnitt an einigen Beispielen und Sonderfällen demonstriert.

\input{delta-iteration}

\input{u2r3-regel-beispiele}


\subsection{Regeloptimierung}

Die Regelanwendungen sind der teuerste Teil im Programmablauf, darum gibt es hier verschiedene Möglichkeiten diesen Prozess zu beeinflussen und damit auf spezielle Bedürfnisse anpassen zu können.

Man kann entscheiden, ob man die Ontologie später verändern will. Das hat zur Folge, das die Entstehungsgeschichte von abgeleiteten Fakten erhalten bleiben muss.

Eine naive Anwendung der Regel hätte außerdem zur Folge, das sich die Regeln immer auf alle Fakten beziehen. Meist reicht es aber sich auf erzeugt Fakten aus vorherigen Schritten zu beziehen. Das wird näher im Abschnitt \ref{abschnitt-delta-iteration} geklärt. Hierbei gibt es zwei verschiedene Varianten wie diese umgesetzt ist.

Die Struktur der Umsetzung der Regeln in SQL ist zwar fix, aber durch gewisse Optimierungen abhängig vom Ausführungskontext. Zum einen wurden zwei verschiedene Varianten der delta-Iteration implmentiert und zum anderen müssen die Regeln, wenn ein kaskadierender Löschmodus aktiv ist auch Informationen mitführen, welche Fakten das aktuelle Faktum erzeugt haben.

Es wäre sicherlich interessant die Regeln in einer gewissen Reihenfolge anzuwenden. Vielleicht gibt es hier eine Möglichkeit eine effzienten Ablaufpfad zu finden.