\subsubsection{Komplexe Ausdrücke finden}

Komplexe Ausdrücke sind OWL Ausdrücke die sich aus einem oder mehr Unteraudsdrücke zusammensetzt. Für die Abspeicherung in u2r3 sind es alle Ausdrücke, die sich nicht direkt in eine Relation abspeichern lassen, sondern auf mehrere Relationen verteilen lässt. In der OWLAPI sind es alle Objekte die keine eigene IRI haben.

Das Suchen nach einem komplexen Ausdruck gestaltet sich nicht so einfach wie vorher beschrieben, da die Abfrage nicht vollständig vorformliert werden kann, da die Unterausdrücke von unterschiedlicher Natur sind und auch die Tiefe und Verschachtelung der Ausdrücke nicht von vorneherein bekannt ist.

Als Lösung dafür kommen zwei Verfahren in Betracht. Erstens man führt einen neuen Namen für diesen komplexen Ausdruck ein. Dann muss über die Ontologie nocheinmal geschlossen werden, damit alle Zusammenhänge, die mit diesem komplexen Ausdruck verbunden sind auch mit diesem neuen Namen verbunden sind. Das ist alldergins sehr zeitaufwendig und zerstört den Vorteil dieses Reasoner, da alle Ergebnisse, die man Abfragen kann nach dem Schlussfolgern bereits in der Datenbank vorliegen. Außerdem verbaut man sich damit die Möglichkeit der Approximation beim Schlussfolgern. So muss nämlich erst komplett geschlussfolgert werden bevor eine Anfrage gestellt wird.

Darum ist das zweite Verfahren, das Aufbauen einer SQL-Abfrage. Diese kann dann zwar erst zur Laufzeit aufgebaut werden und ist schwerer für das RDBMS zu beantworten. Ein erneutes Schlussfolgern erübrigt sich aber. Das Aufbauen der SQL-Abfrage läuft dabei auch rekursiv ab. Die Unterausdrücke werden zu Unterabfragen in dem erstellten SQL-Ausdruck. Man setzt die Rekursion solange fort bis alle Unterausdrücke bei einfachen Ausdrücken angekommen sind.